type Account @entity {
  id: ID! # account address
  achievedGoals: Int!
  failedGoals: Int!
  motivatedGoals: Int!
}

type Goal @entity {
  id: ID! # token id
  uri: String!
  # Params
  createdTimestamp: BigInt!
  authorAddress: String!
  authorStake: BigInt!
  deadlineTimestamp: BigInt!
  isClosed: Boolean!
  isAchieved: Boolean!
  # Watchers
  watchers: [GoalWatcher!]! @derivedFrom(field: "goal")
  watcherAddresses: [String!]!
  watchersNumber: Int!
  acceptedWatcherAddresses: [String!]!
}

type GoalWatcher @entity {
  id: ID! # combination of goal id and account address
  goal: Goal!
  addedTimestamp: BigInt!
  accountAddress: String!
  isAccepted: Boolean!
}
